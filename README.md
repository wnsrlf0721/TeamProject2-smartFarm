# 프로젝트 기획서

## 1. 프로젝트 정의
- **목표**: IoT 센서와 액추에이터를 활용하여 농작물 재배 환경(온도, 습도, 조도 등)을 실시간으로 모니터링하고,
자동 및 수동 제어가 가능한 웹 브라우저 스마트팜 관리 시스템을 구축한다.
- **주요 기능**:
  - 라즈베리파이 기반 센서 데이터 수집 (온도, 습도, 조도 등)
  - MQTT 통신을 활용한 액추에이터 원격 제어 (히터, 팬, 조명 등)
  - SSE를 활용한 실시간 웹 대시보드 업데이트 및 데이터 시각화
  - 카메라를 활용한 타임랩스 기능
  - 사용자 로그인 및 권한 기반 접근 제어 (JWT 인증)
  - 스마트팜 온라인 마켓 기능
## 2. 주요 내용
- **프로젝트 기간**: 2025-12-08 ~ 2025-12-16
- **참여 인원**: 조수민, 양준길, 장세종, 최우영, 안창석(총 5명)
- **데이터 사용처**: 다음 API, SOLAPI 

## 3. 일정 계획
![Gantt 차트]

| 작업 항목                  | 시작 날짜   | 종료 날짜   | 기간(일) |
|---------------------------|------------|------------|---------|
| 프로젝트 정의 및 계획 수립  | 2025-12-08 | 2025-12-09 | 2       |
| 자료 조사 및 벤치마킹       | 2025-12-10 | 2025-12-11 | 2       |
| 아이디어 도출 및 시나리오 작성 | 2025-12-12 | 2025-12-13 | 2       |
| 요구사항 도출 및 WBS 작성   | 2025-12-14 | 2025-12-15 | 2       |
| Prototype 개발 및 검토     | 2025-01-29 | 2025-02-04 | 2       |
| 최종 검토 및 발표 준비     | 2025-02-05 | 2025-02-07 | 2       |
| 프로젝트 발표              | 2025-12-16 | 2025-12-16 | 1       |

-----------------------------

# 작업 분할 구조 (WBS)

## 단계별 작업 내용
### 1. 데이터 정의 및 요구사항 분석
1.1. 데이터 정의  
1.2. 상담 이력 데이터 검토  

### 2. 데이터 수집 및 설계
2.1. 아키텍처 설계  
2.2. 데이터 수집 및 전처리  

### 3. 분석 및 보고
3.1. 데이터 검증 및 모델링  
3.2. 대시보드 및 보고서 작성  

### 시각 자료
![WBS 다이어그램](../assets/wbs_chart.png)
|실물 모형|
|-------|
| ![FarmModel](https://github.com/user-attachments/assets/b9dca21b-882c-4528-b1f5-3455ebe20272) |

---------------------------

# 요구사항 정의서

## 1. 기능 요구사항
- 스마트팜 센서 데이터를 실시간으로 수집할 수 있어야 한다.
- 수집된 데이터는 실시간으로 웹 대시보드에서 시각적으로 확인 가능해야 한다.
- 사용자는 웹을 통해 히터, 팬, 조명 등을 원격으로 제어할 수 있어야 한다.
- 온도/습도/조도 등의 센서값이 임계값을 초과하거나 미만일 경우 알림을 전송해야 한다.
- 알림은 SSE 기반 실시간 전송
- JWT 기반 로그인 인증 및 권한 관리 기능을 제공해야 한다.

## 2. 비기능 요구사항
- 성능: 센서 데이터 수집 및 전송 지연은 5초 이내
- 확장성: 센서 및 액추에이터 추가가 용이한 구조
- 보안성: 인증되지 않은 사용자의 접근 차단

---------------------------

# 프로젝트 설계서

## 1. 데이터 아키텍처
- **설계 개요**:
 - 데이터 수집: 라즈베리파이 센서
 - 데이터 전송: MQTT 프로토콜
 - 데이터 저장: MySQL
 - 분석 및 시각화: React 기반 웹 대시보드

### 1-1. 대시보드 설계
- React 기반 웹 대시보드를 통해 실시간 센서 데이터 시각화
- 주요 구성 요소:
  - 온도 / 습도 / 조도 / 토양수분 / CO2 실시간 센서바 그래프
  - 센서별 평균, 최대, 최소값 트렌드데이터 Line Chart
  - 액추에이터 제어 상태 표시 (ex. ON / OFF)
  - 초음파 센서를 활용한 물통 잔량 표시
  - 재배 프리셋 정보 제공
  - 실시간 팝업 알림 및 최근 10개 데이터 제공 (오늘 / 이전 기준)
 
### 1-2. 알림 시스템 설계
- 센서 데이터가 설정된 임계값을 벗어날 경우 알림 이벤트 발생
- 실시간 알림을 위해 SSE(Server-Sent Events) 기반 단방향 스트리밍 구조 적용
- 알림 처리 흐름:
  1. 센서 데이터 수신
  2. 임계값 비교 여부 판단
  3. 알림 이벤트 생성
  4. SSE 연결된 클라이언트에 전송
- WebSocket 대비 구현 복잡도가 낮고 서버 부하가 적은 SSE 방식을 채택
- 네트워크 불안정 상황을 고려하여 Polling을 보조 수단으로 사용
- SSE 연결 실패 또는 백그라운드 상태의 클라이언트는 Polling API를 통해 알림 상태를 주기적으로 조회
- 동일 센서 이벤트에 대해 중복 알림이 발생하지 않도록 상태 기반 알림 발생 로직 적용
- 임계값 초과 상태가 유지되는 동안 추가 알림을 제한하고,
  정상 범위로 복귀한 이후 재초과 시에만 알림 재발생

## 2. 기술 스택
- 하드웨어: 라즈베리파이, Sensor 5종류, Actuator 5종류
- 백엔드: Java Spring Boot, MySQL, REST API, MQTT
- 프론트엔드: React, Axios
- 보안: Spring Security, JWT

## 3. 설계 이미지
 | **시스템 아키텍처**                        |
 |-------------------------------------|
 | <img width="546" height="268" alt="다운로드" src="https://github.com/user-attachments/assets/9b03a8dd-d580-4ee6-9ab5-dca6bbdbd5e3" />              |

 | **ERD**                             |
 |-------------------------------------|
 | ![ERD_Final.png](img/ERD_Final.png) |

 | **REST API (Swagger)**                        |
 |-------------------------------------|
 |<img width="1456" height="951" alt="Swagger RESTAPI" src="https://github.com/user-attachments/assets/9e14688a-b4a7-44cd-929e-2eb08be98bdb" />|


---------------------------

# 데이터 연동 정의서

## 1. 데이터 정의
- 데이터 소스: 스마트팜 센서 데이터
- 주요 컬럼:
  - sensor_id: 센서 ID
  - timestamp: 측정 시간
  - temperature: 온도
  - humidity: 습도
  - light: 조도

## 2. 연동 방식
- 연동 방식: API 또는 Batch 수집
- 연동 주기: 매일 자정


--------------------------

# 시각화 리포트

## 1. 분석 결과 요약
- 온도 및 습도 변화 패턴을 시각적으로 확인 가능
- 환경 조건에 따른 액추에이터 자동 제어 가능성 확인
- SSE 기반 실시간 대시보드를 통해 센서 데이터 변화 반영
- 임계값 초과 시 실시간 팝업 알림 및 센서바 그래프의 UI, 액추에이터 상태 표시 정상 동작 확인
- SSE 미연결 상황에서도 Polling 방식으로 알림 수신 가능함을 검증

## 2. 대시보드
![대시보드 스크린샷](../assets/dashboard_screenshot.png)

## 3. 제안
- 데이터를 기반으로 [구체적인 제안 내용]

--------------------------
# 주요 기능 (영상)
## 로그인 기능
https://drive.google.com/file/d/1xUre3cH7n7xE1ugdeM7XMvpgJJXjxTge/view?usp=drive_link
## 마이페이지 기능
[마이페이지 조회 및 정보 수정.mp4](https://drive.google.com/file/d/1_blTPNMUX3x7_n5tpdCmSY5b8yt8AwrZ/view?usp=sharing)
## 식물 관리 기능
[2nd_회원 노바And팜 조회 완성본.mp4](https://drive.google.com/file/d/1lRNiqK3MS1izKkW3WjqSKqH9rWcmRuzX/view?usp=sharing)

[2nd_팜 신규생성 완성본.mp4](https://drive.google.com/file/d/1bMwbJ-wOrNtoBOh_LQoo0fG0Jm7vGS9M/view?usp=sharing)

[2nd_프리셋 자동변경 완성본.mp4](https://drive.google.com/file/d/11_yBN19purf_XMGhIxTtD5ylecIgLOkr/view?usp=sharing)

[2nd_팜 삭제 완성본.mp4](https://drive.google.com/file/d/1jxLBPN6ZmEsZgjwlw2vBvUZTDrg2W6iY/view?usp=sharing)

## 타임랩스 기능
[타임랩스생성.mp4](https://drive.google.com/file/d/1BSTH9gb2QcsDmj2R12R-zhsMMd2O6hlg/view?usp=sharing)
# 프로젝트 회고

## 1. 프로젝트 개요
- **프로젝트 이름**: SuperNova
- **기간**: 2025-12-08 ~ 2025-12-16
- **팀 구성원**: 조수민, 양준길, 장세종, 최우영, 안창석

---

## 2. 회고 주제
### 2.1. 잘한 점 (What went well)
- 프로젝트에서 효과적으로 수행된 작업 또는 성공 사례
  - 데이터 수집 자동화 구현 성공
  - 팀원 간 원활한 협업과 커뮤니케이션

---

### 2.2. 개선이 필요한 점 (What could be improved)
- 프로젝트 과정에서 비효율적이었거나 개선이 필요한 부분
  - 초기 API 정리가 원활하지 못함
  - 센서 및 액추에이터와 같은 물리적 제품 구현에 계획보다 많은 시간이 걸림

---

### 2.3. 배운 점 (Lessons learned)
- 이번 프로젝트를 통해 학습한 내용
  - 팁원들과 소통의 중요성 및 의견 통일의 순차적 과정 필요성

---

### 2.4. 다음 단계 (Action items)
- 향후 프로젝트에 적용할 개선 방안 또는 실행 계획
  - 초기 단계에서 요구사항 정의에 더 많은 시간 할당
  - 시뮬레이션 모형 제작 속도와 테스트 동작 확인을 더 짧은 시간 내에 완수

---

## 3. 프로젝트 주요 결과 요약
- **성과**:
  - 상담 이력 데이터를 활용한 분석 모델 개발 완료
  - 대시보드와 보고서 배포 성공
- **결과물**:
  - [링크]: 프로젝트 산출물 GitHub 저장소
  - [링크]: 시각화 대시보드

---

## 5. 자유로운 의견
- 프로젝트 과정 중 느낀 점, 제안 사항, 또는 기타 의견
  - 예: 팀원들 간의 협업이 매우 원활했고, 다음 프로젝트에서도 같은 방식을 유지하고 싶음.
  - 예: 시간 관리가 다소 아쉬웠으므로, 다음 프로젝트에서는 좀 더 구체적인 일정 관리 툴을 활용하고 싶음.
