# 프로젝트 기획서

## 1. 프로젝트 정의
- **목표**: IoT 센서와 액추에이터를 활용하여 농작물 재배 환경(온도, 습도, 조도 등)을 실시간으로 모니터링하고,
자동 및 수동 제어가 가능한 웹 브라우저 스마트팜 관리 시스템을 구축한다.
- **주요 기능**:
  - 라즈베리파이 기반 센서 데이터 수집 (온도, 습도, 조도 등)
  - MQTT 통신을 활용한 액추에이터 원격 제어 (히터, 팬, 조명 등)
  - SSE를 활용한 실시간 웹 대시보드 업데이트 및 데이터 시각화
  - 카메라를 활용한 타임랩스 기능
  - 사용자 로그인 및 권한 기반 접근 제어 (JWT 인증)
  - 스마트팜 온라인 마켓 기능
## 2. 주요 내용
- **프로젝트 기간**: 2025-12-08 ~ 2025-12-16
- **참여 인원**: 조수민, 양준길, 장세종, 최우영, 안창석(총 5명)
- **외부 API**: 다음 API, SOLAPI 

## 3. 일정 계획
| 작업 항목                  | 시작 날짜   | 종료 날짜   | 기간(일) |
|---------------------------|------------|------------|---------|
| 프로젝트 정의 및 계획 수립  | 2025-12-01 | 2025-12-07 | 7      |
| Reference 조사            | 2025-12-08 | 2025-12-08 | 1       |
| 아이디어 도출 및 요구사항 작성 | 2025-12-09 | 2025-12-09 | 1       |
| 프로젝트 설계서 도출       | 2025-12-10 | 2025-12-10 | 1       |
| 개발 및 검토              | 2025-12-09 | 2025-12-14 | 6       |
| 최종 검토 및 발표 준비     | 2025-02-15 | 2025-02-15 | 1      |
| 프로젝트 발표              | 2025-12-16 | 2025-12-16 | 1       |

-----------------------------

# 작업 분할 구조 (WBS)

## 단계별 작업 내용
### 1. 데이터 정의 및 요구사항 분석

#### 1.1. 스마트팜 환경 데이터 정의
    - 온도, 습도, 조도, 토양수분, Co2, 초음파(물통 수위), 카메라 센서 데이터 항목 정의
    - 액추에이터 제어 데이터 정의 (히터, 팬, LED, 서보모터(블라인드), 가습기, 워터펌프)

### 2. 데이터 수집 및 설계

#### 2.1. 스마트팜 시스템 아키텍처 설계
    - 라즈베리파이, 센서, 서버 간 통신 구조 설계
    - MQTT 기반 데이터 흐름 정의

#### 2.2. 센서 데이터 수집 및 전처리
    - 센서 데이터 실시간 수집 구현
    - 데이터 저장 형식 및 전처리 로직 설계

### 3. 분석, 시각화 및 제어

#### 3.1. 환경 데이터 검증 및 저장
    - 수집 데이터 정확성 검증
    - 데이터베이스 저장 및 관리
    
#### 3.2. 로그인 페이지
    - 회원가입 및 ID/PW 찾기 기능 구현
    - 아이디 중복 확인, 주소 검색, 이메일 인증 및 전화번호 SMS 인증 API 연동 구현
    - 비밀번호 복잡도 정책 및 입력 유효성 검증 로직 구현
    
#### 3.3. 프로필 보기 및 타입랩스 페이지 
    - 사용자 기본 정보 조회 및 수정 기능 구현
    - 비밀번호 변경 및 Nova 기기 등록 및 삭제 기능 구현
    - 기기별·팜별 타임랩스 제작 현황 확인
    - 영상 재생 및 다운로드 기능 구현
    
#### 3.4. 내 식물관리 페이지 
    - 사용자가 보유한 Nova 기기의 팜(Farm) 정보 조회 기능 구현
    - 각 팜별 환경 임계값(온도, 습도 등) 사용자 설정 기능 구현
    - 팜(Farm) 생성 및 삭제 기능 구현

#### 3.4. 타임랩스 생성 및 조회 모달창
    - 팜(Farm)별 작물 성장 과정을 확인할 수 있는 타임랩스 기능 구현
    - 라즈베리파이 카메라를 통해 주기적으로 촬영
    - 프리셋 단계별 영상 재생 및 다운로드 기능 구현
    
#### 3.5. 웹 대시보드 및 알림 페이지
    - 팜(Farm) 환경 데이터 시각화 대시보드 구현
    - 기기별·팜별 알림 조회 및 읽음 처리 기능 구현
    - MQTT 기반 실시간 환경 데이터 시각화 구현

#### 3.6. 마켓 페이지
    - 마켓 상품 및 주문 화면 구현
    
#### 3.7. 액추에이터 제어 및 통합 테스트
    - 웹 기반 액추에이터 원격 제어 테스트
    - 스마트팜 + 마켓 기능 통합 검증  
    
### 시각 자료
![WBS 다이어그램](../assets/wbs_chart.png)
|실물 모형|
|-------|
| ![FarmModel](https://github.com/user-attachments/assets/b9dca21b-882c-4528-b1f5-3455ebe20272) |

---------------------------

# 요구사항 정의서

## 1. 기능 요구사항
- 스마트팜 센서 데이터를 실시간으로 수집할 수 있어야 한다.
- 수집된 데이터는 실시간으로 웹 대시보드에서 시각적으로 확인 가능해야 한다.
- 사용자는 웹을 통해 히터, 팬, 조명 등을 원격으로 제어할 수 있어야 한다.
- 온도/습도/조도 등의 센서값이 임계값을 초과하거나 미만일 경우 알림을 전송해야 한다.
- 알림은 SSE 기반 실시간 전송
- JWT 기반 로그인 인증 및 권한 관리 기능을 제공해야 한다.

## 2. 비기능 요구사항
- 성능: 센서 데이터 수집 및 전송 지연은 5초 이내
- 확장성: 센서 및 액추에이터 추가가 용이한 구조
- 보안성: 인증되지 않은 사용자의 접근 차단

---------------------------

# 프로젝트 설계서

## 1. 데이터 아키텍처
- **설계 개요**:
 - 데이터 수집: 라즈베리파이 센서
 - 데이터 전송: MQTT 프로토콜
 - 데이터 저장: MySQL
 - 분석 및 시각화: React 기반 웹 대시보드

## 2. 기술 스택
- 하드웨어: 라즈베리파이, Sensor 5종류, Actuator 5종류
- 백엔드: Java Spring Boot, MySQL, REST API, MQTT
- 프론트엔드: React, Axios
- 보안: Spring Security, JWT

## 3. 상세 기능 
### 3.1. 대시보드 설계
- React 기반 웹 대시보드를 통해 실시간 센서 데이터 시각화
- 주요 구성 요소:
  - 온도 / 습도 / 조도 / 토양수분 / CO2 실시간 센서바 그래프
  - 센서별 평균, 최대, 최소값 트렌드데이터 Line Chart
  - 액추에이터 제어 상태 표시 (ex. ON / OFF)
  - 초음파 센서를 활용한 물통 잔량 표시
  - 재배 프리셋 정보 제공
  - 실시간 팝업 알림 및 최근 10개 데이터 제공 (오늘 / 이전 기준)
 
### 3.2. 알림 시스템 설계
- 센서 데이터가 설정된 임계값을 벗어날 경우 알림 이벤트 발생
- 실시간 알림을 위해 SSE(Server-Sent Events) 기반 단방향 스트리밍 구조 적용
- 알림 처리 흐름:
  1. 센서 데이터 수신
  2. 임계값 비교 여부 판단
  3. 알림 이벤트 생성
  4. SSE 연결된 클라이언트에 전송
- WebSocket 대비 구현 복잡도가 낮고 서버 부하가 적은 SSE 방식을 채택
- 네트워크 불안정 상황을 고려하여 Polling을 보조 수단으로 사용
- SSE 연결 실패 또는 백그라운드 상태의 클라이언트는 Polling API를 통해 알림 상태를 주기적으로 조회
- 동일 센서 이벤트에 대해 중복 알림이 발생하지 않도록 상태 기반 알림 발생 로직 적용
- 임계값 초과 상태가 유지되는 동안 추가 알림을 제한하고,
  정상 범위로 복귀한 이후 재초과 시에만 알림 재발생

## 4. 설계 이미지
 | **시스템 아키텍처**                        |
 |-------------------------------------|
 | <img width="546" height="268" alt="다운로드" src="https://github.com/user-attachments/assets/9b03a8dd-d580-4ee6-9ab5-dca6bbdbd5e3" />              |

 | **ERD**                             |
 |-------------------------------------|
 | ![ERD_Final.png](img/ERD_Final.png) |

 | **REST API (Swagger)**                        |
 |-------------------------------------|
 |<img width="1456" height="951" alt="Swagger RESTAPI" src="https://github.com/user-attachments/assets/9e14688a-b4a7-44cd-929e-2eb08be98bdb" />

--------------------------

# 시각화 리포트

## 1. 분석 결과 요약
- 온도 및 습도 변화 패턴을 시각적으로 확인 가능
- 환경 조건에 따른 액추에이터 자동 제어 가능성 확인
- SSE 기반 실시간 대시보드를 통해 센서 데이터 변화 반영
- 임계값 초과 시 실시간 팝업 알림 및 센서바 그래프의 UI, 액추에이터 상태 표시 정상 동작 확인
- SSE 미연결 상황에서도 Polling 방식으로 알림 수신 가능함을 검증

## 2. 대시보드
![대시보드 스크린샷](../assets/dashboard_screenshot.png)

--------------------------
# 주요 기능 (영상)
## 전체영상 
추후 넣을 예정 
## 기능별 영상
### 로그인 기능
https://drive.google.com/file/d/1xUre3cH7n7xE1ugdeM7XMvpgJJXjxTge/view?usp=drive_link
### 마이페이지 기능
[마이페이지 조회 및 정보 수정.mp4](https://drive.google.com/file/d/1_blTPNMUX3x7_n5tpdCmSY5b8yt8AwrZ/view?usp=sharing)
###식물 관리 기능
[2nd_회원 노바And팜 조회 완성본.mp4](https://drive.google.com/file/d/1lRNiqK3MS1izKkW3WjqSKqH9rWcmRuzX/view?usp=sharing)

[2nd_팜 신규생성 완성본.mp4](https://drive.google.com/file/d/1bMwbJ-wOrNtoBOh_LQoo0fG0Jm7vGS9M/view?usp=sharing)

[2nd_프리셋 자동변경 완성본.mp4](https://drive.google.com/file/d/11_yBN19purf_XMGhIxTtD5ylecIgLOkr/view?usp=sharing)

[2nd_팜 삭제 완성본.mp4](https://drive.google.com/file/d/1jxLBPN6ZmEsZgjwlw2vBvUZTDrg2W6iY/view?usp=sharing)

### 타임랩스 기능
[타임랩스생성.mp4](https://drive.google.com/file/d/1BSTH9gb2QcsDmj2R12R-zhsMMd2O6hlg/view?usp=sharing)

### 대시보드 기능
추후 넣을 예정 
### 알림 페이지 기능
추후 넣을 예정 
### 마켓 기능 
추후 넣을 예정 

# 프로젝트 회고

## 1. 프로젝트 개요
- **프로젝트 이름**: SuperNova
- **기간**: 2025-12-08 ~ 2025-12-16
- **팀 구성원**: 조수민, 양준길, 장세종, 최우영, 안창석

---

## 2. 회고 주제
### 2.1. 잘한 점 (What went well)
- 프로젝트에서 효과적으로 수행된 작업 또는 성공 사례
  - 라즈베리파이와 센서를 연동하여 환경 데이터 수집을 자동화하고, MQTT 기반 실시간 전송을 안정적으로 구현함
  - 웹 대시보드를 통해 센서 데이터와 액추에이터 상태를 직관적으로 확인할 수 있도록 시각화함
  - 스마트팜 환경 제어 기능과 마켓 기능을 연계하여 하나의 서비스 흐름으로 통합 구현함
  - 개발 과정에서 팀원 간 역할을 분담하고, 이슈 발생 시 지속적인 소통을 통해 문제를 해결함
  - 타임랩스 촬영 기능을 추가하여 작물 성장 과정을 시각적으로 기록할 수 있도록 구현함

---

### 2.2. 개선이 필요한 점 (What could be improved)
- 프로젝트 과정에서 비효율적이었거나 개선이 필요한 부분
  - 프로젝트 초기에 API 명세와 데이터 구조가 명확히 정리되지 않아, 개발 중간에 수정이 반복적으로 발생함
  - 센서 및 액추에이터와 같은 물리적 하드웨어 구현 과정에서 예상보다 많은 시간이 소요되었으며, 하드웨어 이슈로 인한 테스트 지연이 발생함
  - 타임랩스 이미지 저장 및 관리 방식에 대한 사전 설계가 부족하여, 구현 과정에서 저장 구조를 재조정해야 했음
  - 프로젝트 초반 설계 단계에서 경험 부족으로 인해 일정 관리가 다소 어려웠으며, 개발 진행 중 일정 조정이 필요했음

---

### 2.3. 배운 점 (Lessons learned)
- 이번 프로젝트를 통해 학습한 내용
  - IoT 시스템은 소프트웨어 설계뿐만 아니라 하드웨어 환경까지 함께 고려해야 함을 체감함
  - 팀원들과의 지속적인 소통을 통해 요구사항을 단계적으로 정리하고, 의견을 하나로 통합하는 과정의 중요성을 배움
  - MQTT, JWT 인증, 센서 제어 등 다양한 기술을 하나의 서비스로 통합하는 경험을 통해 전체 시스템 흐름에 대한 이해도가 향상됨
  - 실제 장비를 활용한 프로젝트에서는 충분한 테스트 시간 확보가 필수적이라는 점을 인식하게 됨

---

### 2.4. 다음 단계 (Action items)
- 향후 프로젝트에 적용할 개선 방안 또는 실행 계획
  - 프로젝트 초기 단계에서 요구사항 정의와 API 설계에 더 많은 시간을 할당하여 개발 과정의 수정 비용을 줄일 계획
  - 하드웨어 테스트를 위한 시뮬레이션 환경 및 테스트 시나리오를 사전에 준비하여, 물리적 장비로 인한 시행착오를 최소화할 예정
  - 타임랩스 및 환경 데이터를 활용한 자동 제어 로직 고도화 및 데이터 분석 기능을 추가할 계획
  - 마켓 판매 데이터와 생육 환경 데이터를 연계한 생산량 예측 기능 도입을 검토할 예정

---

## 3. 프로젝트 주요 결과 요약
- **성과**:
  - IoT 센서를 활용한 스마트팜 환경 데이터 실시간 수집 및 자동화 시스템 구현
  - 웹 대시보드를 통한 환경 데이터 시각화 및 액추에이터 원격 제어 기능 구현
  - 스마트팜 생산 농산물을 판매할 수 있는 마켓 기능 개발 및 연동 완료
  - 작물 성장 과정을 기록하는 타임랩스 기능 구현을 통해 생산 과정의 시각적 검증 가능
  - JWT 기반 사용자 인증 및 권한 관리 기능 적용으로 보안성 강화
  
- **결과물**:
  - [링크]: 프로젝트 산출물 GitHub 저장소
  - [링크]: 시각화 대시보드

---
